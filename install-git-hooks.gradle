
import org.apache.tools.ant.taskdefs.condition.Os

tasks.create(name: 'gitExecutableHooks') {
    if (!Os.isFamily(Os.FAMILY_WINDOWS)) {
        Runtime.getRuntime().exec("chmod -R +x .git/hooks/")
    }
}

task installGitHooks(type: Copy) {
    println "=======installGitHooks======"
    from new File(rootProject.rootDir, 'pre-commit')
    into { new File(rootProject.rootDir, '.git/hooks') }
}

gitExecutableHooks.dependsOn installGitHooks
clean.dependsOn gitExecutableHooks